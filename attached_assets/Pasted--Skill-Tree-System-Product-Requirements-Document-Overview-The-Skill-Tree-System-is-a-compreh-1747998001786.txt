# Skill Tree System - Product Requirements Document

## Overview

The Skill Tree System is a comprehensive gamification feature that transforms task completion into meaningful skill progression. Users unlock skills by completing specific combinations of wellness tasks, creating a visual representation of their journey and expertise across five wellness categories.

## Core System Architecture

### Skill Categories and Organization

**Five Primary Categories**
- **Physical**: Movement, exercise, and fitness-related skills
- **Nutrition**: Diet, protein intake, and nutritional optimization skills  
- **Sleep**: Sleep quality, consistency, and recovery skills
- **Mental**: Mindfulness, stress management, and mental resilience skills
- **Recovery**: Rest, mobility, and restoration skills

**Skill Difficulty Levels**
- **Level 1**: Beginner skills (3-5 task completions required)
- **Level 2**: Intermediate skills (5-10 task completions required)
- **Level 3**: Advanced skills (10-25 task completions required)
- **Level 4**: Expert skills (25-50 task completions required)
- **Level 5**: Master skills (50+ task completions required)

### Visual Skill Tree Interface

**Interactive Skill Map**
- Grid-based layout with skills positioned by category and difficulty
- Color-coded category system:
  - Physical: Red (#D13639)
  - Nutrition: Green (#4BA651)
  - Sleep: Blue (#3679D1)
  - Mental: Purple (#9B59B6)
  - Recovery: Orange (#E67E22)

**Skill Node States**
- **Hidden/Locked**: Gray/dimmed appearance - users cannot see what skills exist or their requirements
- **Unlocked**: Bright appearance with completion indicator and celebration effects
- **Recently Unlocked**: Special highlight indicating newly earned skills

**Skill Information Display (Post-Unlock Only)**
- Skill title and descriptive text visible only after unlock
- Category badge and difficulty level
- Achievement timestamp showing when skill was earned
- No preview of unlock requirements - skills are discovered through gameplay

## Skill Unlock Requirements and Conditions
*Note: These requirements are hidden from users and serve as surprise unlocks*

### Physical Category Skills

**Beginner Level (Level 1)**
- **First Steps**: Complete 3 × "30 min Brisk Walk" tasks
- **Chair Squatter**: Complete 3 × "Chair Squats" tasks  
- **Early Bird**: Complete 3 × "30 min Brisk Walk" AND 2 × "15 min Morning Sunlight" tasks
- **Step Seeker**: Complete 5 × "Walk 10,000 steps" tasks

**Intermediate Level (Level 2)**
- **Stretch Master**: Complete 5 × "15 min Yoga Stretch" AND 2 × "20 min Mobility" tasks
- **Strength Builder**: Complete 5 × "Bodyweight Strength Circuit" AND 3 × "Full Body Workout" tasks
- **Consistent Mover**: Complete 10 × "Walk 10,000 steps" AND 5 × "30 min Brisk Walk" tasks
- **Leg Power**: Complete 3 × "Heavy Leg Day" AND 10 × "Chair Squats" tasks

**Advanced Level (Level 3-4)**
- **Explosive Athlete**: Complete 5 × "Plyometric Jump Set" AND 5 × "HIIT Sprints" tasks
- **Endurance Master**: Complete 7 × "HIIT Sprints" AND 15 × "Walk 10,000 steps" tasks
- **Strength Titan**: Complete 7 × "Heavy Leg Day" AND 5 × "Loaded Carry" AND 10 × "Full Body Workout" tasks

**Master Level (Level 5)**
- **Iron Warrior**: Complete 10 × "Loaded Carry" AND 10 × "Heavy Leg Day" AND 7 × "Plyometric Jump Set" AND 7 × "HIIT Sprints" tasks
- **Ultimate Athlete**: Complete 20 × "Plyometric Jump Set" AND 20 × "HIIT Sprints" AND 20 × "Loaded Carry" AND 20 × "Heavy Leg Day" AND 30 × "Full Body Workout" tasks

### Nutrition Category Skills

**Progressive Protein Mastery**
- **Protein Rookie**: Complete 3 × "Hit Protein Target" tasks
- **Daily Protein**: Complete 7 × "Hit Protein Target" tasks
- **Protein Pro**: Complete 15 × "Hit Protein Target" tasks
- **Meal Planner**: Complete 25 × "Hit Protein Target" tasks
- **Macronutrient Master**: Complete 35 × "Hit Protein Target" tasks
- **Elite Fueler**: Complete 50 × "Hit Protein Target" tasks

### Sleep Category Skills

**Sleep Optimization Progression**
- **Night Owl**: Complete 3 × "Sleep ≥ 7 hours" tasks
- **Early Riser**: Complete 3 × "Sleep ≥ 7 hours" AND 3 × "15 min Morning Sunlight" tasks
- **Consistent Sleeper**: Complete 7 × "Sleep ≥ 7 hours" tasks (CONSECUTIVE DAYS REQUIRED)
- **Relaxation Expert**: Complete 10 × "Sleep ≥ 7 hours" AND 5 × "10 min Mindfulness" tasks
- **Deep Sleeper**: Complete 14 × "Sleep ≥ 7 hours" AND 7 × "30s Cold Shower" tasks
- **Recovery Master**: Complete 21 × "Sleep ≥ 7 hours" tasks (CONSECUTIVE DAYS REQUIRED)

### Mental Category Skills

**Mindfulness and Resilience Development**
- **Breath Beginner**: Complete 3 × "5 min Breath & Posture" tasks
- **Sunshine Seeker**: Complete 5 × "15 min Morning Sunlight" tasks
- **Mindfulness Adept**: Complete 5 × "10 min Mindfulness" tasks
- **Posture Pro**: Complete 7 × "5 min Breath & Posture" tasks
- **Stress Manager**: Complete 7 × "10 min Mindfulness" AND 5 × "15 min Yoga Stretch" tasks
- **Cold Warrior**: Complete 7 × "30s Cold Shower" tasks
- **Zen Master**: Complete 15 × "10 min Mindfulness" AND 10 × "30s Cold Shower" AND 15 × "5 min Breath & Posture" tasks

### Recovery Category Skills

**Restoration and Mobility Mastery**
- **Restful Breaks**: Complete 3 × "5 min Breath & Posture" tasks
- **Stretch Novice**: Complete 3 × "15 min Yoga Stretch" tasks
- **Mobility Explorer**: Complete 3 × "20 min Mobility" tasks
- **Cold Therapy User**: Complete 5 × "30s Cold Shower" tasks
- **Restoration Specialist**: Complete 7 × "30s Cold Shower" AND 5 × "20 min Mobility" AND 7 × "15 min Yoga Stretch" tasks
- **Rejuvenation Master**: Complete 10 × "30s Cold Shower" AND 7 × "20 min Mobility" AND 15 × "15 min Morning Sunlight" AND 10 × "10 min Mindfulness" tasks

### Program Completion Achievements

**Graduation Skills**
- **Beginner Graduate**: Complete 50 × "Sleep ≥ 7 hours" AND 40 × "Walk 10,000 steps" AND 30 × "Hit Protein Target" tasks
- **Intermediate Graduate**: Complete 60 × "Sleep ≥ 7 hours" AND 50 × "Walk 10,000 steps" AND 40 × "Hit Protein Target" AND 20 × "Full Body Workout" tasks  
- **Advanced Graduate**: Complete 60 × "Sleep ≥ 7 hours" AND 60 × "Walk 10,000 steps" AND 50 × "Hit Protein Target" AND 30 × "Full Body Workout" AND 15 × "Heavy Leg Day" AND 15 × "HIIT Sprints" tasks

### Rare Achievement Skills

**Elite Mastery Skills**
- **Wellness Grandmaster**: Complete 60 × "Sleep ≥ 7 hours" AND 60 × "Hit Protein Target" AND 30 × "30s Cold Shower" AND 30 × "10 min Mindfulness" AND 20 × "20 min Mobility" AND 60 × "Walk 10,000 steps" tasks
- **Iron Resolve**: Complete 63 × "Sleep ≥ 7 hours" AND 63 × "Walk 10,000 steps" AND 63 × "Hit Protein Target" tasks (Perfect completion of all 63 program days)

## Skill Unlock Logic and Processing

### Task Completion Tracking
**Real-Time Progress Monitoring**
- Monitor all task completions across user's entire history
- Count total completions for each task type
- Track consecutive completion streaks for specific skills
- Update skill progress indicators immediately after task completion

**Consecutive Completion Requirements**
- Some skills require consecutive day completions (e.g., "Consistent Sleeper")
- System tracks unbroken streaks for qualifying tasks
- Missed days reset consecutive counters
- Clear indication when consecutive requirements apply

### Unlock Validation Process
**Multi-Task Requirements**
- Skills can require multiple different task types
- Each task type has individual completion count requirements
- ALL task requirements must be met simultaneously for unlock
- Progress tracked silently in background without user awareness

**Surprise Unlock Trigger Logic**
- Automatic checking after every task completion
- Immediate skill unlock when all requirements met without user foreknowledge
- Haptic feedback and surprise celebration on unlock
- Addition to notification queue for surprise skill reveal modal

### Progress Persistence and Recovery

**Cross-Session Persistence**
- All skill progress saved to local storage
- Progress maintained across app sessions and updates
- Skill unlock status permanently stored
- Notification queue persisted until acknowledged

**Program Change Behavior**
- **CRITICAL REQUIREMENT**: Changing programs (Beginner/Intermediate/Advanced) resets the current program progress
- **CRITICAL REQUIREMENT**: Already unlocked skills are NEVER reset when changing programs
- User maintains all previously earned skills regardless of program switches
- New program provides fresh opportunity to unlock additional skills
- Skill requirements remain consistent across all program types

## Skill Notification System

### Surprise Skill Unlock Modal
**Surprise Reveal Experience**
- Skills unlock as complete surprises - users never know what's coming next
- Modal appears immediately after completing qualifying tasks
- No prior indication or progress tracking visible to users
- Creates excitement and motivation through unexpected rewards

**Unlock Notification Queue**
- Skills added to notification queue immediately upon surprise unlock
- Queue persisted across app sessions to handle interruptions
- One skill revealed at a time with celebratory modal interface
- User must acknowledge each skill before seeing next surprise unlock

**Surprise Notification Display**
- Full-screen modal overlay with celebration animation
- Skill icon, title, and achievement description revealed for first time
- "Got it!" button to acknowledge and proceed to next surprise (if any)
- Animated entrance with haptic feedback and visual celebration
- First time user learns what they accomplished and what the skill represents

**Notification Persistence**
- Track acknowledged vs pending notifications
- Prevent duplicate notifications for same skill
- Handle app interruptions during notification display
- Graceful recovery if notification data corrupted

### Visual Feedback and Celebrations

**Unlock Animations**
- Skill nodes animate from locked to unlocked state
- Color transition and glow effects
- Particle effects or other celebratory animations
- Progress bar filling to 100% with satisfaction feedback

**Achievement Sharing**
- Generate shareable achievement cards for social media
- Include skill icon, title, and user accomplishment
- Branded design consistent with app identity
- Integration with device sharing capabilities

## User Experience Features

### Skill Tree Navigation
**Exploration and Discovery**
- Users can browse unlocked skills in the skill tree at any time
- Clear indication of locked (hidden) vs unlocked skills
- Tap unlocked skills to view achievement details and celebration
- Filter functionality by category to view earned skills

**Progress Visualization**
- Overall skill tree completion percentage based on unlocked skills
- Category-based summaries showing skills earned in each area
- Visual celebration indicators for recently unlocked skills
- No progress indicators toward future unlocks (maintains surprise element)

### Skill Details and Information
**Post-Unlock Skill Information**
- Detailed description of what each skill represents (shown only after unlock)
- Celebration of the achievement and what tasks contributed to earning it
- Timestamp of when the skill was unlocked
- No preview of future skills or their requirements (preserves surprise)

**Educational Content**
- Tips and strategies for completing required tasks
- Health and wellness benefits of skill mastery
- Progression suggestions for skill development
- Integration with task catalog for detailed task information

## Technical Implementation Requirements

### Data Structure and Storage
**Skill Progress Tracking**
- Unique skill identifiers for each of 40+ skills
- Progress counters for each task requirement
- Boolean unlock status for each skill
- Timestamp tracking for unlock events

**Storage Optimization**
- Efficient data structures for fast lookup
- Minimal storage footprint for mobile devices
- Reliable persistence across app versions
- Backup and recovery capabilities

### Performance Considerations
**Real-Time Updates**
- Efficient skill checking algorithms
- Minimal performance impact on task completion
- Smooth animations without frame drops
- Responsive skill tree rendering with many nodes

**Memory Management**
- Lazy loading of skill tree graphics
- Efficient caching of frequently accessed data
- Cleanup of temporary notification data
- Optimized rendering for various screen sizes

## Success Metrics and Analytics

### System Performance Metrics
**Technical Reliability**
- Skill unlock accuracy rate
- Notification delivery success rate
- Data persistence reliability
- Cross-session state consistency

**User Experience Quality**
- Skill tree load time and responsiveness
- User satisfaction with unlock requirements
- Perceived fairness of skill difficulty progression
- Overall gamification effectiveness

## Future Enhancement Opportunities

### Advanced Skill Features
**Skill Dependencies and Prerequisites**
- Hierarchical skill unlocking with parent-child relationships
- Skill branches requiring choices between different paths
- Prestige skills requiring multiple category mastery
- Seasonal or time-limited special achievement skills